<html>
<head>
<script type="application/javascript;version=1.7"/>
//<![CDATA[
var cbid = 1;
var pendingCallbacks = {};

function genDispatcher () {
    while (1) {
        yield;
        // Somebody wants to install a callback:
    };
};

var dispatcher = genDispatcher();

function wrapCallback (cb) {
    return function () {
        dispatcher.waiting.push(this);
        dispatcher.next();
    };
};

//]]></script>
</head>
<body>
</body>
</html>